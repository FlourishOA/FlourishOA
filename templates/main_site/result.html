{% extends 'main_site/base.html' %}

{% load staticfiles %}
{% load data_extras %}
{% block header %}
<header id="header" class="alt">
    <div style="overflow: hidden;display: inline-block">
        <img style="float: left" src="{% static "images/dl-logo.png" %}"
         width="40" height="40">
        <h2 style="float: left"><a href="/">PriceSleuth</a></h2>
    </div>
</header>
{% endblock %}
{% block content %}
<div id="main">
<!-- Content -->
    <section id="content" class="main">
        <h2>{{ journal.journal_name }}</h2>
        <div id="info" style="float:left;">

            <p>ISSN: {{ journal.issn }} <br/>
            Type: <a id="about-hybrid">{% if not journal.is_hybrid %} Hybrid {% endif %} Fully OpenAccess</a> <br/>
            Publisher: {{ journal.pub_name }}<br/>
                Category: {{ journal.category }}</p>
        </div>
        <div id="prices" style="float:left; padding-left: 30px">

            <ul> Prices:
            {% for price in prices %}
                <li>{{ price.date_stamp }}: ${{ price.price }}</li>
            {% endfor %}
            </ul>
        </div>
        <div id="influences" style="float:left; padding-left: 30px">
            {% if has_influence %}
                <ul> ArticleInfluence Scores:
                {% for influence in influences %}
                    {% if influence.article_influence %}
                    <li>{{ influence.date_stamp.year }}: {{ influence.article_influence|to_three_sigfigs }}</li>
                    {% endif %}
                {% endfor %}
            {% else %}
                <p>This journal has no influence <br>scores in our database.</p>
            {% endif %}
            </ul>
        </div>
    </section>

</div>
{% endblock %}
{% block extra_scripts %}
    <style>
    /* Making the default width smaller specifically for the result page */
        #wrapper {
		    width: 50em;
	    }
    </style>
    <script src="{% static "assets/js/d3.min.js" %}"></script>
    <script>
        $(document).ready(function() {
            var anchor = d3.select("#about-hybrid")
                    .on("mouseover", function() {
                        anchor.append("div")
                                .text("Text about hybrid journals to go here.")
                                .attr("id", "popup");

                    })
                    .on("mouseout", function() {
                        d3.select("#popup").remove();
                    });
        });
    </script>
{% endblock %}
